# System Design 分析框架（按步骤）

系统设计六步分析流程：

---

## 1. Requirements（需求分析）

### 目标：
明确系统要实现什么功能，确定范围和边界。

### 包含内容：
- Functional Requirements（功能性）：
  - 用户注册、登录
  - 发布内容、评论、点赞
  - 搜索、筛选、通知
- Non-Functional Requirements（非功能性）：
  - 高可用性、低延迟、高并发
  - 安全性、扩展性、可维护性

### 注意事项：
- 明确用户角色和使用场景
- 区分 Must-have 和 Nice-to-have

---

## 2. Architecture（系统架构）

### 目标：
设计系统的高层结构，定义组件之间的协作方式。

### 通常包含：
- 客户端（Web, Mobile）
- API 网关 / Load Balancer
- 应用服务层（微服务或单体服务）
- 数据存储层（SQL/NoSQL、缓存、对象存储）
- 外部服务（如支付、消息服务、CDN）

### 可用图示：
- 架构图（组件连接）
- 数据流图（请求路径）

---

## 3. Modules（模块划分）

### 目标：
将系统分成逻辑模块，每个模块职责清晰。

### 示例模块：
- 用户服务（User Service）
- 内容管理（Post Service）
- 搜索服务（Search Service）
- 通知服务（Notification Service）
- 鉴权服务（Auth Service）

### 每个模块需包含：
- 功能描述
- 输入输出（对外提供什么接口）
- 是否 stateless，如何扩展

---

## 4. Interfaces（接口定义）

### 目标：
定义模块之间、系统与用户之间的通信协议。

### 包括：
- RESTful API / gRPC 接口
- URL 路径、方法（GET/POST/PUT/DELETE）
- 输入输出数据结构（JSON、protobuf）
- 错误码、幂等性设计

---

## 5. Data（数据建模）

### 目标：
设计数据库结构，确保数据一致性和高效查询。

### 包含内容：
- 实体关系建模（ERD 图）
- 表结构设计（主键、外键、索引）
- 缓存策略（Redis、Memcached）
- 数据分区、分片（Sharding）
- 数据一致性要求（强一致 vs 最终一致）

### 示例模型：
- 用户表、帖子表、评论表、点赞记录表
- 时间戳、状态字段、冗余字段优化查询

---

## 6. Optimize（优化与保障）

### 目标：
提升系统性能、稳定性、安全性，预防故障。

### 优化方向：

#### 性能优化：
- 缓存热点数据
- 使用异步任务 / 队列（Kafka, RabbitMQ）

#### 可用性优化：
- 多副本部署
- 故障转移
- 服务降级与熔断处理

#### 安全性保障：
- HTTPS 加密传输
- 用户数据加密存储
- 权限校验与访问控制

#### 可观测性：
- 日志追踪系统
- 指标监控（如 Prometheus + Grafana）
- 报警系统配置

#### 成本控制：
- 分析资源消耗
- 按需扩容与资源优化
- 云服务成本估算与限额策略

---
